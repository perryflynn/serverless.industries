<!doctype html>
<html lang="{{page.lang}}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="{{'/css/main.css' | relative_url}}?{{site.time | date: '%s%N'}}" crossorigin="anonymous">
    <title>{{page.title}} - {{site.my.sitetitle}}</title>

    {% assign authorinfo = site.authors | where: 'short_name', page.author | first %}

    {% if authorinfo.short_name %}
    <meta property="og:type" content="article" />
    <meta property="og:article:author" content="{{authorinfo.name}}">
    <meta name="author" content="{{authorinfo.name}}">
    {% else %}
    <meta property="og:type" content="website" />
    {% endif %}
    <meta property="og:url" content="{{site.url}}{{page.url}}">
    <meta property="og:title" content="{{ page.title }}">
    <meta property="og:site_name" content="{{site.my.sitetitle}}">
    <meta property="og:image" content="{{site.url}}{{'/favicon/apple-touch-icon.png' | relative_url}}" />

    {% if page.date %}
    <meta property="og:article:published_time" content="{{page.date | date_to_xmlschema}}">
    {% endif %}

    <meta name="twitter:card" content="summary" />

    {% if authorinfo.twitter %}
    <meta name="twitter:creator" content="@{{authorinfo.twitter}}" />
    {% endif %}

    {% if page.description or page.excerpt %}
    <meta name="description" content="{{ page.description | default: page.excerpt | strip_html | strip_newlines }}">
    <meta property="og:description" content="{{ page.description | default: page.excerpt | strip_html | strip_newlines }}">
    {% endif %}

    {% if page and page.tags.size > 0 %}
    <meta name="keywords" content="{{page.tags | join: ', '}}">
      {% for tag in page.tags %}
      <meta property="og:article:tag" content="{{tag}}">
      {% endfor %}
    {% endif %}

    <link rel="alternate" type="application/rss+xml" title="{{site.my.rsstitle}}" href="{{site.url}}{{'/feed.xml' | relative_url}}">
    <link href="{{site.url}}{{'/opensearch.xml' | relative_url}}" rel="search" title="{{site.my.domain}}" type="application/opensearchdescription+xml">

    {% assign otherlang = site.posts | where_exp: 'item', "item.lang!=page.lang and item.ref==page.ref" %}
    {% if page and otherlang.size > 0 %}
      {% for langpost in otherlang %}
        <link rel="alternate" hreflang="{{langpost.lang}}" href="{{site.url}}{{langpost.url}}">
      {% endfor %}
    {% endif %}

    <link rel="apple-touch-icon" sizes="180x180" href="{{'/favicon/apple-touch-icon.png' | relative_url}}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{'/favicon/favicon-32x32.png' | relative_url}}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{'/favicon/favicon-16x16.png' | relative_url}}">
    <link rel="manifest" href="{{'/site.webmanifest' | relative_url}}">
    <link rel="mask-icon" href="{{'/favicon/safari-pinned-tab.svg' | relative_url}}" color="#5bbad5">
    <meta name="apple-mobile-web-app-title" content="serverless.industries">
    <meta name="application-name" content="serverless.industries">
    <meta name="msapplication-TileColor" content="#404040">

    <meta name="theme-color" content="#dec8b3">

  </head>
  <body class="nojs bgcached">

    <div class="container">

        {{content}}

    </div>

    <script src="{{'/js/jquery-3.3.1.slim.min.js' | relative_url}}?{{site.time | date: '%s%N'}}" crossorigin="anonymous" defer></script>
    <script src="{{'/js/bootstrap.bundle.min.js' | relative_url}}?{{site.time | date: '%s%N'}}" crossorigin="anonymous" defer></script>

    <script>
      (function() {
        var d = document;
        var bdy = d.querySelector("body");

        // indicate that js is enabled
        bdy.classList.remove("nojs");
        bdy.classList.add("yesjs");

        // load the background image
        var el = d.createElement("img");
        el.style.display = "none";

        el.onload = function()
        {
          if(!bdy.classList.contains("bgcached"))
          {
            bdy.classList.add("bgloaded");
          }
        };

        el.src = "{{'css/Datacenter_Empty_Floor-snip.jpg' | relative_url}}?{{site.time | date: '%s%N'}}";

        if(!el.complete)
        {
          bdy.classList.remove("bgcached");
        }
      })();
    </script>

  </body>
</html>
